{"version":3,"sources":["main.js"],"names":["$","document","foundation","ready","injectCopy","$img","this","$copy","clone","$oldSVG","next","length","remove","show","hide","after","SVGInjector","get","hideLabels","each","i","removeClass","$SVGImgs","on","$menu","$btn","sizes","window","e","newSize","oldSize","inArray","Foundation","DropdownMenu","hasClass","MediaQuery","atLeast","current","heightOffset","test","createElement","style","height","documentElement","insertBefore","firstChild","offsetHeight","removeChild","innerHeight","is","$hero","$content","currentMargin","getComputedStyle","getPropertyValue","newMargin","parseFloat","css","ev","$form","reset","preventDefault","timeout","clearTimeout","setTimeout"],"mappings":"AAAA,YAEAA,GAAEC,UAAUC,aAEZF,EAAEC,UAAUE,MAAM,WAIhB,QAASC,KACP,GAAIC,GAAOL,EAAEM,MACTC,EAAQF,EAAKG,QACbC,EAAUJ,EAAKK,KAAK,gBAEpBD,GAAQE,OAAS,GACnBF,EAAQG,SACRL,EAAMM,QAENR,EAAKS,OAGPT,EAAKU,MAAMR,GACXS,YAAYT,EAAMU,IAAI,IAyExB,QAASC,KACOlB,EAAE,qCACRmB,KAAK,SAASC,GACV,IAANA,GACFpB,EAAEM,MAAMe,YAAY,gBA5F1B,GAAIC,GAAWtB,EAAE,qCAkBjBsB,GAASC,GAAG,0BAA2BnB,GACvCkB,EAASH,KAAKf,EAGd,IAAIoB,GAAQxB,EAAE,cACVyB,EAAOzB,EAAE,gBACT0B,GAAS,QAAS,SAetB,IAbA1B,EAAE2B,QAAQJ,GAAG,wBAAyB,SAASK,EAAGC,EAASC,GACzD,IAAmC,IAA/B9B,EAAE+B,QAAQF,EAASH,KAAgD,IAA/B1B,EAAE+B,QAAQD,EAASJ,GACzDF,EAAMtB,WAAW,eACZ,KAAmC,IAA/BF,EAAE+B,QAAQF,EAASH,KAAgD,IAA/B1B,EAAE+B,QAAQD,EAASJ,GACrD,GAAIM,YAAWC,aAAaT,EAGrCC,GAAKS,SAAS,SAChBT,EAAKJ,YAAY,UAKjBW,WAAWG,WAAWC,QAAQ,SACrB,GAAIJ,YAAWC,aAAaT,EAIzC,IAAqC,SAAjCQ,WAAWG,WAAWE,QAAoB,CAc5C,GAAIC,GAXJ,WACC,GAAIC,GAAOtC,SAASuC,cAAc,MAClCD,GAAKE,MAAMC,OAAS,QACpBzC,SAAS0C,gBAAgBC,aAAaL,EAAMtC,SAAS0C,gBAAgBE,WAErE,IAAIH,GAASH,EAAKO,YAGlB,OAFA7C,UAAS0C,gBAAgBI,YAAYR,GAE9BG,KAG8Bf,OAAOqB,WAE7C,IAAIhD,EAAE,QAAQiD,GAAG,SAAU,CACzB,GAAIC,GAAQlD,EAAE,QACdkD,GAAMR,OAAOQ,EAAMR,SAAWJ,OACzB,IAAItC,EAAE,QAAQiD,GAAG,YAAa,CACnC,GAAIE,GAAWnD,EAAE,YACboD,EAAgBzB,OAAO0B,iBAAiBF,EAASlC,IAAI,IAAIqC,iBAAiB,cAC1EC,EAAYC,WAAWJ,GAAiBd,CAC5Ca,GAASM,IAAI,aAAcF,IAM/BvD,EAAE,yBAAyBuB,GAAG,qBAAsB,SAASmC,EAAIC,GAC/DA,EAAM1C,IAAI,GAAG2C,QACb5D,EAAE,kBAAkBE,WAAW,UAC9BqB,GAAG,SAAU,SAASmC,GACvBA,EAAGG,kBAIL,IAAIC,EAEJ9D,GAAE,+BAA+BuB,GAAG,mBAAoB,WACtDwC,aAAaD,GACbA,EAAUE,WAAW9C,EAAY","file":"main.min.js","sourcesContent":["'use strict';\n\n$(document).foundation();\n\n$(document).ready(function() {\n  // Inject SVGs so we can change colors\n  var $SVGImgs = $('.product-nav-icon, .dropdown-arrow');\n\n  function injectCopy() {\n    var $img = $(this);\n    var $copy = $img.clone();\n    var $oldSVG = $img.next('.injected-svg');\n\n    if ($oldSVG.length > 0) {\n      $oldSVG.remove();\n      $copy.show();\n    } else {\n      $img.hide();\n    }\n\n    $img.after($copy);\n    SVGInjector($copy.get(0));\n  }\n\n  $SVGImgs.on('replaced.zf.interchange', injectCopy);\n  $SVGImgs.each(injectCopy);\n\n  // Call responsive dropdown manually, since the builtin method breaks on resize\n  var $menu = $('#main-menu');\n  var $btn = $('#menu-button');\n  var sizes = ['small', 'medium'];\n\n  $(window).on('changed.zf.mediaquery', function(e, newSize, oldSize) {\n    if ($.inArray(newSize, sizes) !== -1 && $.inArray(oldSize, sizes) === -1) {\n      $menu.foundation('destroy');\n    } else if ($.inArray(newSize, sizes) === -1 && $.inArray(oldSize, sizes) !== -1) {\n      var menu = new Foundation.DropdownMenu($menu);\n    }\n\n    if ($btn.hasClass('open')) {\n      $btn.removeClass('open');\n    }\n  });\n\n  // Add the dropdown on first load on large screens\n  if (Foundation.MediaQuery.atLeast('large')) {\n    var menu = new Foundation.DropdownMenu($menu);\n  }\n\n  // Set the panel height on mobile screens to account for collapsing browser chrome\n  if (Foundation.MediaQuery.current == 'small') {\n\n    // Adapted from https://gist.github.com/scottjehl/2051999\n    function viewportHeight() {\n    \tvar test = document.createElement('div');\n    \ttest.style.height = '100vh';\n    \tdocument.documentElement.insertBefore(test, document.documentElement.firstChild);\n\n    \tvar height = test.offsetHeight;\n    \tdocument.documentElement.removeChild(test);\n\n    \treturn height;\n    }\n\n    var heightOffset = viewportHeight() - window.innerHeight;\n\n    if ($('body').is('.home')) {\n      var $hero = $('#hero');\n      $hero.height($hero.height() - heightOffset);\n    } else if ($('body').is('.product')) {\n      var $content = $('.content');\n      var currentMargin = window.getComputedStyle($content.get(0)).getPropertyValue('margin-top');\n      var newMargin = parseFloat(currentMargin) - heightOffset;\n      $content.css('margin-top', newMargin);\n    }\n  }\n\n  // Show success dialog on form submit\n  // TODO: Actually hook this up\n  $('.eap form[data-abide]').on('formvalid.zf.abide', function(ev, $form) {\n    $form.get(0).reset();\n    $('#success-modal').foundation('open');\n  }).on('submit', function(ev) {\n    ev.preventDefault();\n  });\n\n  // Hide all but first validation error on EAP form\n  var timeout;\n\n  $('.eap form[data-abide] input').on('invalid.zf.abide', function() {\n    clearTimeout(timeout);\n    timeout = setTimeout(hideLabels, 10);\n  });\n\n  function hideLabels() {\n    var $errors = $('input[data-invalid] + .form-error');\n    $errors.each(function(i) {\n      if (i !== 0) {\n        $(this).removeClass('is-visible');\n      }\n    });\n  }\n});\n"]}